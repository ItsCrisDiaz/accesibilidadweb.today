!function(){let embed=document.querySelector("#newsletter");if(!embed)return;embed.innerHTML='\n\t\t<form class="flow" novalidate>\n      <div class="l-sidebar">\n        <div data-content>\n          <label class="label" for="substackForm">Correo electrónico</label>\n          <p class="status error" id="substackInputError" data-inline data-form-error></p>\n          <input class="input" id="substackForm" type="email" aria-describedby="substackInputError" required  />\n        </div>\n        <div data-sidebar>\n          <button class="submit" type="submit">Suscribirse</button>\n        </div>\n      </div>\n      <div role="status" aria-busy="true" class="loader flow" tabindex="-2">\n      </div>\n      <div role="status" class="status" tabindex="-2" data-form-state></div>\n    </form>';const form=embed.querySelector("form"),email=embed.querySelector("input"),loading=embed.querySelector(".loader"),error=embed.querySelector("[data-form-error]"),announce=embed.querySelector("[data-form-state]");async function submitHandler(event){if(event.preventDefault(),!email.value)return error.innerHTML='\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">\n        <path d="M15 9L9 15M9 9L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n      Por favor usa un correo válido.',error.classList.remove("success"),error.classList.add("error"),void email.focus();try{announce.innerHTML="",error.innerHTML="",loading.innerHTML='<div class="loading"></div>\n        <p><b>Enviando...</b></p>',loading.focus();let request=await fetch("https://us-central1-substackapi.cloudfunctions.net/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:email.value,domain:"accesibilidadweb.substack.com/"})}),response=await request.json();loading.innerHTML="",console.log(response),announce.innerHTML=`\n        <p>\n          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">\n            <path d="M7.5 12L10.5 15L16.5 9M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n          ¡Gracias por inscribirte! Te hemos enviado un correo de confirmación a <b>${email.value}</b> para que completes el proceso.</p>`,announce.classList.remove("error"),announce.classList.add("success")}catch(error){loading.hidden=!0,announce.innerHTML='<p>\n      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">\n        <path d="M15 9L9 15M9 9L15 15M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n      Algo no está funcionando. Por favor, intenta de nuevo. Si persiste, puedes contactarme a <a href="mailto:cristian@accesibilidadweb.today>cristian@accesibilidadweb.today</a> para suscribirte.',announce.classList.remove("success"),announce.classList.add("error")}}form.addEventListener("submit",submitHandler)}();